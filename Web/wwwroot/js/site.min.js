var app=angular.module("app",[]);

app.controller("AccountController",["$scope","$rootScope","$timeout","LoginService",function(o,e,r,n){o.userName="",o.password="",o.errorMessage="",this.$onInit=function(){},o.reset=function(){o.userName="",o.password="",o.errorMessage=""},o.login=function(){o.errorMessage="",n.login(o.userName,o.password).then(function(e){e.data&&(e.data.authenticated?window.location=e.data.urlToRedirect:o.errorMessage="User name and/or password are not valid.")},function(e){console.log(e)})},o.change=function(){o.errorMessage&&o.errorMessage.length&&(o.errorMessage="")},o.defaultSubmit=function(e){13==e.keyCode&&(angular.element(document.getElementById("loginForm")).scope().loginForm.$invalid||o.login())}}]);
app.controller("ExchangeController",["$scope","$rootScope","$timeout","ExchangeService",function(n,e,o,c){n.euro=0,n.usd=0,this.$onInit=function(){},n.changeUSD=function(){n.euro&&0!=n.euro&&(n.euro=0)},n.exchange=function(){c.exchangeCurrency(n.usd,"USD","EUR").then(function(e){n.euro=e.data},function(e){console.log(e)})},n.reset=function(){n.euro=0,n.usd=0,o(function(){var e=document.getElementById("usd");e.select(),e.focus()},1)}}]);
app.factory("ExchangeService",["$http",function(c){return{exchangeCurrency:function(e,r,n){var t={value:e,fromCurrency:r,targetCurrency:n};return c.post("/Exchange/ExchangeCurrency",JSON.stringify(t),{headers:{"Content-Type":"application/json;charset=utf-8;"}})}}}]);
app.factory("LoginService",["$http",function(r){return{login:function(n,t){var o={userName:n,password:t};return r.post("/Account/Login",JSON.stringify(o),{headers:{"Content-Type":"application/json;charset=utf-8;"}})}}}]);